FROM golang:1.25.5 AS build
LABEL description="Build container"

ENV CGO_ENABLED 0
COPY . /build
WORKDIR /build
RUN go build -ldflags "-s" -o start-sync scripts/kratos/providers_sync.go

FROM alpine:3.23.3 AS runtime
LABEL description="Run container"

WORKDIR /usr/bin
COPY --from=build /build/start-sync /usr/bin/start-sync
ENTRYPOINT ["./start-sync"]
